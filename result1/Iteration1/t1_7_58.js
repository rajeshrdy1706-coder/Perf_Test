(self.webpackChunkkitsune=self.webpackChunkkitsune||[]).push([[58],{5935:(t,i,n)=>{!function(t){function i(){window.location.hash&&(window.location.hash=window.location.hash)}function n(i,n,e){var a=0;return i.filter(".lazy").each((function(){t(this).hasClass("lazy")&&function(i,n){return t(window).height()+t(window).scrollTop()>=t(i).offset().top-n.threshold}(this,n)&&t(this).data("original-src")&&t(this).is(":visible")&&(t.fn.lazyload.loadOriginalImage(this,e),t(this).removeClass("lazy"),a++)})),a}t.fn.lazyload=function(e){var a=t.extend(t.fn.lazyload.defaults,e),o=this,s=!1,r=o.length;t(window).on("scroll",(function(t){s=!0})),n(o,a,null),t(window).trigger("scroll");var l=window.location.hash;i();var h=setInterval((function(){if(r<=0)return t(window).off("scroll"),void clearInterval(h);if(s){s=!1;var i=null;l!=window.location.hash&&(i=window.location.hash,l=window.location.hash);var e=n(o,a,i);r-=e}}),250);return this},t.fn.lazyload.defaults={threshold:750},t.fn.lazyload.loadOriginalImage=function(n,e){null!=e&&t(n).on("load",(function(){i()})),t(n).attr("src",t(n).data("original-src")).removeData("original-src")},t.fn.loadnow=function(i){this.each((function(){t.fn.lazyload.loadOriginalImage(this),t(this).removeClass("lazy")}))}}(n(4692))},4116:(t,i,n)=>{"use strict";n.d(i,{A:()=>h});var e=n(467),a=n(296),o=n(4756),s=n.n(o),r=n(6848),l=n(4692);function h(t){var i=this;this.$container=t||l("body"),this.state={},this.loadData(),this.initEvents(),this.wrapTOCs(),this.initShowFuncs(),this.updateUI().then((function(){i.updateState(),i.showAndHide()}))}h.prototype.productShortMap={fx:"firefox",m:"mobile",tb:"thunderbird"},h.prototype.platformMap={Windows:{default:"win10",XP:"winxp",Vista:"win7",7:"win7",8:"win8",8.1:"win8",10:"win10",11:"win11"},"Mac OS":"mac"},h.prototype.loadData=function(){try{this.data=JSON.parse(this.$container.find(".showfor-data").html())}catch(t){this.data={products:[],platforms:[],versions:[]}}for(var t in this.productSlugs=this.data.products.map((function(t){return t.slug})),this.platformSlugs=[],this.data.platforms)this.data.platforms[t].forEach(function(t){this.platformSlugs.push(t.slug)}.bind(this));for(var i in this.versionSlugs={},this.data.versions)this.data.versions[i].forEach(function(t){this.versionSlugs[t.slug]=i}.bind(this))},h.prototype.initEvents=function(){window.onpopstate=this.updateUI.bind(this),this.$container.on("change keyup","input, select",this.onUIChange.bind(this))},h.prototype.ensureSelect=function(t,i,n,e){var o,s,r,h={},f=/^([a-z]+)(\d+)/;function c(t,i){for(var n=0;n<t.length;n++)if(t[n].slug===i)return t[n];return null}if("version"===i){var d="version:"+e;if(t.find('option[value="'+d+'"]').length>0)return void t.val(d);var u=e.match(f);if(u){var p=(0,a.A)(u,3),v=p[1],w=p[2],m=parseInt(w,10),g=null,x=0;if(t.find("option").each((function(){var t=l(this).val(),i=t.split(":")[1].match(f);if(i&&i[1]===v){var n=parseInt(i[2],10);n>x&&(x=n,g=t)}})),g&&m>x)return void t.val(g)}null!==(r=c(this.data.versions[n],e))&&(h["data-min"]=r.min_version,h["data-max"]=r.max_version)}else if("platform"===i)r=c(this.data.platforms[n],e);else{if("product"!==i)throw new Error("Unknown showfor select type "+i);r=c(this.data.products,e)}if(null!==r){if(e=i+":"+e,0===t.find('option[value="'+e+'"]').length){for(s in o=l("<option>").attr("value",e).text(r.name),h)o.attr(s,h[s]);t.append(o)}t.val(e)}},h.prototype.updateUI=(0,e.A)(s().mark((function t(){var i,n,e,a,o,h,f,c,d,u,p,v,w,m,g=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,(e=document.location.hash).indexOf(":")>=0&&(n=e.slice(1)),null===n&&window.sessionStorage&&(n=sessionStorage.getItem("showfor::persist")),!n){t.next=10;break}if(a=!1,this.$container.find(".product input[type=checkbox]").prop("checked",!1),n.split("&").forEach(function(t){var i=t.split(":"),n=i[0]||null,e=i[1]||null,o=i[2]||null,s=this.$container.find('.product[data-product="'+n+'"]');if(0!==s.length){if(a=!0,s.find('input[type=checkbox][value="product:'+n+'"]').prop("checked",!0),e){var r=s.find("select.platform");this.ensureSelect(r,"platform",n,e)}if(o){var l=s.find("select.version");this.ensureSelect(l,"version",n,o)}}}.bind(this)),!a){t.next=10;break}return t.abrupt("return");case 10:return o=new r.Ay,t.next=13,o.getBrowser();case 13:return h=t.sent,t.next=16,o.getOS();case 16:f=t.sent,c=null===(i=h.version)||void 0===i?void 0:i.toString("major"),d=this.$container.find(".product"),u={},d.each((function(t,i){var n=l(i);u[n.data("product")]=n})),h.mozilla&&c&&(f.mobile&&-1!==this.productSlugs.indexOf("mobile")?(p="m"+c,v=u.mobile.find("select.version"),this.ensureSelect(v,"version","mobile",p)):-1!==this.productSlugs.indexOf("firefox")&&(w="fx"+c,m=u.firefox.find("select.version"),this.ensureSelect(m,"version","firefox",w))),d.find("select.platform").each((function(t,i){var n=l(i),e=n.parents(".product").data("product"),a=g.platformMap[f.name]||f.name.toLowerCase();"string"!=typeof a&&(a=a[f.version]||a.default),g.ensureSelect(n,"platform",e,a)}));case 23:case"end":return t.stop()}}),t,this)}))),h.prototype.onUIChange=function(){this.updateState(),this.showAndHide(),this.persist()},h.prototype.persist=function(){var t,i,n=0,e="";for(t in this.state)(i=this.state[t]).enabled&&(n>0&&(e+="&"),e+=t+":"+(i.platform||"")+":"+(i.version&&i.version.slug||""),n++);""!==e&&((""===document.location.hash||document.location.hash.indexOf(":")>=0)&&history.replaceState(this.state,e,"#"+e),window.sessionStorage&&window.sessionStorage.setItem("showfor::persist",e))},h.prototype.updateState=function(){this.state={},this.$container.find(".product").each(function(t,i){var n=l(i),e=n.data("product");this.state[e]={enabled:n.find("input[type=checkbox]").prop("checked")},n.find("select").each(function(t,i){var n=l(i),a=n.val().split(":"),o=a[0],s=a[1];if("version"===o){var r=n.find("option:selected");s={slug:s,min:parseFloat(r.data("min")),max:parseFloat(r.data("max"))}}this.state[e][o]=s}.bind(this))}.bind(this))},h.prototype.wrapTOCs=function(){this.$container.find("#toc a").each((function(t,i){var n=l(i),e=n.attr("href");if("#"===e[0])for(var a=l(e),o=n.parent();a.length;){if(a.hasClass("for")){var s=l("<span/>",{class:"for","data-for":a.data("for")});o=o.wrap(s)}a=a.parent()}}))},h.prototype.initShowFuncs=function(){this.$container.find(".for").each(function(t,i){var n=l(i),e=n.data("for").split(/\s*,\s*/),a=this.matchesCriteria.bind(this,e);n.data("show-func",a)}.bind(this))},h.prototype.showAndHide=function(){this.$container.find(".for").each((function(t,i){var n=l(i),e=n.data("show-func")();void 0!==e?n.toggle(e):n.show()}))},h.prototype.matchesCriteria=function(t){var i=!1,n=!1,e=!1,a=!1,o=[];for(var s in this.state){var r=this.state[s];r.enabled&&r.platform&&o.push(r.platform)}return t.forEach(function(t){var s,r,l=0===t.indexOf("not");l&&(t=t.replace(/^not ?/,""));var h=">=";if("="===(t=this.productShortMap[t]||t)[0]&&(t=t.slice(1),h="="),this.productSlugs.indexOf(t)>=0)i=!0,this.state[t].enabled!==l&&(n=!0);else if(void 0!==this.versionSlugs[t]){s=this.versionSlugs[t],i=!0,r=parseFloat(/^[a-z]+([\d\.]+)$/.exec(t)[1]);var f=this.state[s].version.min,c=this.state[s].version.max;(this.state[s].enabled&&(">="===h&&r<c||"="===h&&r>=f&&r<c))!==l&&(n=!0)}else if(this.platformSlugs.indexOf(t)>=0)e=!0,o.indexOf(t)>=0!==l&&(a=!0);else if("win"===t){e=!0;var d=!1;["winxp","win7","win8","win10","win11"].forEach((function(t){o.indexOf(t)>=0&&(d=!0)})),d!==l&&(a=!0)}}.bind(this)),(!i||n)&&(!e||a)}}}]);